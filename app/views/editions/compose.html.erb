<% wrap_with template_name -%>

<% @pages.each do |page| %>
  <%= render "page", page: page %>
<% end -%>

<% if composing? %>
  <% content_for :composer_variables do %>
    <%= csrf_meta_tags %>
    <script type="text/javascript" charset="utf-8">

      var composer = <%= raw({
        editionID:  @edition.id,
        sectionID: @section.id,
        headlineFontWeights: @layout_module.config["headline_font_weights"],
        storyTextLineHeight: @layout_module.config["story_text_line_height"]
      }.to_json) %>

      var editionJSON = <%= raw render(template: "editions/show.json") %>
    </script>
  <% end %>
  <% content_for :toolbar do %>
    <%= render 'toolbar' %>
  <% end -%>
<% end -%>
